library(httptest)

update_ex_data <-
  structure(
    list(
      song_mbid = c(
        "d74b4de5-ff1e-4ff0-898b-a4d66d23c18d",
        "77e8b8e1-443a-41b7-9c91-14b445317d5b",
        "0902a0fe-f32a-423a-8124-eeec8da002c5",
        "5e4f3702-67fa-48c1-9c99-fbdd695c49c4",
        "e94ea7df-9acb-4f01-9c6e-9129a48a6f04",
        "",
        "a7ec5656-be3e-4a93-b9ab-a2497ef013b3",
        "",
        "",
        "",
        "",
        "",
        "3c375fba-050a-4be5-8963-3bca1a762271",
        "4459f042-afff-4fa3-b5e5-e10d9782992d",
        "24452f7a-3bc7-4c6e-b1f6-fe05b058f346",
        "00bd8820-f19e-4459-a3e6-0390ada318cc",
        "e3bb30f6-4c3d-424b-b886-4045984bdb6d",
        "",
        "81a0ad4b-1da3-462e-b89f-9d5a010ab3b3",
        "0de41e0b-4294-44f2-8e19-1592840367f2",
        "",
        "1c73271d-aa37-4638-bd91-486af44ee8aa",
        "8f497502-15f3-429e-b1bc-31f973f019ce",
        "",
        "",
        "",
        "",
        "",
        "",
        ""
      ),
      song_title = c(
        "Life Goes Like That",
        "Just to Have Someone",
        "Take You Home",
        "One More Red Light",
        "How I Feel Right Now",
        "Backroad Therapy",
        "Dammit",
        "Not Supposed to Know Each Other",
        "Don't",
        "Sweat (A La La La La Long)",
        "Summer Time",
        "Well Enough Alone",
        "It's OK!",
        "Style",
        "What I Go to School For",
        "Ode to My Family",
        "MUSCLE MEMORY",
        "American Honey",
        "Yours4Sure",
        "Waffle House",
        "Not Supposed to Know Each Other",
        "IF YOU GO DOWN (I'M GOIN' DOWN TOO)",
        "How Do I Do This",
        "Well Enough Alone",
        "When I Say I Do Today",
        "Summer Time",
        "Well Enough Alone",
        "Flatline",
        "Always Be Home",
        "Why Do I"
      ),
      artist_mbid = c(
        "2415e269-6c50-437a-a7b5-fcc7c6109974",
        "",
        "4b714531-2c81-48d2-b134-4197f820caa1",
        "4b714531-2c81-48d2-b134-4197f820caa1",
        "4b714531-2c81-48d2-b134-4197f820caa1",
        "",
        "",
        "",
        "",
        "0a5c92c7-4aa7-4324-82ab-8e8e733507cb",
        "",
        "",
        "6fda00c2-449a-4bf4-838f-038d41a07c73",
        "20244d07-534f-4eff-b4d4-930878889970",
        "35b9706f-a6bb-4876-acf3-94fb82c62388",
        "c98d40fd-f6cf-4b26-883e-eaa515ee2851",
        "779d1126-e48c-43f2-8b51-005f3b116d7e",
        "0eedfc95-e79a-4fd9-832a-cd816a0b3fda",
        "43084cb2-a430-4922-968b-05da51bf1653",
        "6e019bc6-5c23-4935-94f0-4a896631d846",
        "",
        "779d1126-e48c-43f2-8b51-005f3b116d7e",
        "779d1126-e48c-43f2-8b51-005f3b116d7e",
        "",
        "",
        "",
        "",
        "",
        "",
        ""
      ),
      artist = c(
        "Tenille Arts",
        "Wild Fire",
        "Cassadee Pope",
        "Cassadee Pope",
        "Cassadee Pope",
        "Alexandra Kay",
        "Alexandra Kay",
        "Taylor Edwards",
        "Taylor Edwards",
        "Inner Circle",
        "Carolyn Miller",
        "Carolyn Miller",
        "Atomic Kitten",
        "Taylor Swift",
        "Busted",
        "The Cranberries",
        "Kelsea Ballerini",
        "Lady A",
        "We Are Leo",
        "Jonas Brothers",
        "Taylor Edwards",
        "Kelsea Ballerini",
        "Kelsea Ballerini",
        "Carolyn Miller",
        "Carolyn Miller",
        "Carolyn Miller",
        "Carolyn Miller",
        "Carolyn Miller",
        "Carolyn Miller",
        "Carolyn Miller"
      ),
      album_mbid = c(
        "5bf382a9-5273-4d5b-855e-fd326db57dcb",
        "",
        "84df6fd7-2f1b-48b6-b8ca-5e63f11d3a92",
        "84df6fd7-2f1b-48b6-b8ca-5e63f11d3a92",
        "84df6fd7-2f1b-48b6-b8ca-5e63f11d3a92",
        "",
        "212800db-5f0c-45e3-a738-61676db58a84",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        ""
      ),
      album = c(
        "Girl to Girl",
        "Just to Have Someone",
        "Stages",
        "Stages",
        "Stages",
        "Backroad Therapy",
        "Dammit",
        "Born in July",
        "Don't",
        "",
        "Summer Time",
        "Well Enough Alone",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "Well Enough Alone",
        "When I Say I Do Today",
        "Summer Time",
        "Well Enough Alone",
        "Flatline",
        "Always Be Home",
        "Why Do I"
      ),
      date_unix = c(
        "1698014385",
        "1698014204",
        "1698014003",
        "1698013737",
        "1698013549",
        "1698013284",
        "1698009711",
        "1698009478",
        "1698009281",
        "1698009072",
        "1698008286",
        "1698008116",
        "1698007507",
        "1698007209",
        "1698006978",
        "1698006692",
        "1698005735",
        "1698005507",
        "1698005097",
        "1698004930",
        "1698004764",
        "1698004479",
        "1698003997",
        "1698001937",
        "1697963746",
        "1697963481",
        "1697963311",
        "1697961422",
        "1697961223",
        "1697961004"
      ),
      date = c(
        "22 Oct 2023, 22:39",
        "22 Oct 2023, 22:36",
        "22 Oct 2023, 22:33",
        "22 Oct 2023, 22:28",
        "22 Oct 2023, 22:25",
        "22 Oct 2023, 22:21",
        "22 Oct 2023, 21:21",
        "22 Oct 2023, 21:17",
        "22 Oct 2023, 21:14",
        "22 Oct 2023, 21:11",
        "22 Oct 2023, 20:58",
        "22 Oct 2023, 20:55",
        "22 Oct 2023, 20:45",
        "22 Oct 2023, 20:40",
        "22 Oct 2023, 20:36",
        "22 Oct 2023, 20:31",
        "22 Oct 2023, 20:15",
        "22 Oct 2023, 20:11",
        "22 Oct 2023, 20:04",
        "22 Oct 2023, 20:02",
        "22 Oct 2023, 19:59",
        "22 Oct 2023, 19:54",
        "22 Oct 2023, 19:46",
        "22 Oct 2023, 19:12",
        "22 Oct 2023, 08:35",
        "22 Oct 2023, 08:31",
        "22 Oct 2023, 08:28",
        "22 Oct 2023, 07:57",
        "22 Oct 2023, 07:53",
        "22 Oct 2023, 07:50"
      )
    ),
    row.names = c(NA,-30L),
    class = "data.frame"
  )


with_mock_api(
  {
    test_that("Update output is producted correctly", {
      expect_snapshot_value(
        update_scrobbles(update_ex_data, "date_unix","condwanaland", "mocked"),
        style = "deparse")
    })
  }
)
